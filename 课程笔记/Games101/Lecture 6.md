---
banner: "![[andreas-rocha-icypeaks01.jpg]]"
banner_y: 0.25
---
把到达光学元件上的光，产生的信息，离散成了像素，对这些像素采样，形成了照片

采样不只发生在位置上还能发生在时间上，对图像在时间上进行采样，形成了视频

**采样产生的问题**
- 走样
- 摩尔纹
- 车轮效应
原因就是信号的变化太快了，以至于采样的速度跟不上

# 反走样处理方法：采样前模糊
## 频域，时域
频域和时域是信号处理的两个基本概念，它们是描述信号特性的不同视角。

## 时域（Time Domain）：
时域分析是观察信号随时间变化的过程。在时域中，信号被表示为时间的一个函数，即信号的变化直接与时间轴相关。例如，一个音频信号可以被绘制为电压随时间变化的波形。时域分析关注的是信号的瞬时值、波形形状、信号的持续时间、幅度变化等。
时域信号的基本表示如下：
$$x(t) = f(t)$$
其中 $x(t)$ 是在时间 $t$ 时刻的信号值，$f(t)$ 是信号随时间 $t$ 的变化函数。

## 频域（Frequency Domain）：
频域分析是观察信号组成频率成分的过程。在频域中，信号被表示为不同频率的正弦波和/或余弦波的组合。频域分析关注的是信号的频率内容、频率分布、幅度和相位等。通过傅里叶变换等数学工具，可以将时域信号转换为频域信号。

## 时域与频域的关系：
- 时域和频域是信号分析的不同视角，它们之间可以通过傅里叶变换相互转换。
- 时域分析适合观察信号的细节和瞬态行为，而频域分析适合观察信号的频率成分和整体特性。
- 举例来说，在音频信号处理中，时域分析可以用来理解语音的发音细节，而频域分析可以用来理解音调（频率）和音色（频谱）。

# 傅里叶变换
任何一个周期性的函数都可以变成一系列正弦/余弦的线性组合和一个常数项
![[Pasted image 20241207180149.png]]
时域 $$ F(\omega)_{SpatialDomain} $$
频域 $$f(x)_{FrequencyDomain}$$
![[Pasted image 20241207181124.png]]
傅里叶变换 $$F(\omega) = \int_{-\infty}^{\infty} f(x) e^{-2\pi i\omega x} dx$$
逆变换 $$f(x)=\int_{-\infty}^{\infty}F(\omega)e^{2\pi i\omega x}d\omega$$
Recall $$e^{ix}=\cos x+i\sin x$$

# 走样
采样的频率跟不上信号变化的频率就会产生走样
![[Pasted image 20241207181442.png]]
低频信号：采样充分，可合理重建
高频信号采样不足：重建似乎来自低频信号

我们对蓝色函数进行采样，得到黑色的函数
但假如原本就有这样一个黑色的函数
我们同时对蓝色和黑色进行采样，两个截然不同的函数，得到的采样结果完全相同
![[Pasted image 20241207181647.png]]
这就被称为**走样**（*Aliases*）

# 滤波
滤波就是抹掉一些特定的频率
对应的信号如何发生变化
傅里叶变换可以把一个函数从时域变到频域

右边的图像就是左边的照片通过傅里叶变换得到的
右边图像表示的就是有多少信息
中间部分是低频信息，越往外越高频
![[Pasted image 20241207181921.png]]
## 高通滤波
在频域空间内完全抹掉低频信号，将结果还原成图像，形成左图
高频的东西在图像上表示的就是图像的边界
![[Pasted image 20241207182111.png]]
> 为什么高频信息代表着边界？
	当某一图像的周围突然发生发生了变化，我们就认为他是边界
	比如图中人物的衣服和背景就是由黑色突然变成了灰色
	相当于颜色信号突然从黑色变成了灰色，就是出现了高频的变化，即边界

## 低通滤波
![[Pasted image 20241207182158.png]]

# 卷积
移动窗口（Filter），将窗口中三个数和覆盖信号的三个数做点乘，填到结果中
![[Pasted image 20241207182244.png]]
## 定理
时域的卷积 == 频域的乘积

- 可以拿到一幅图直接用一个卷积滤波器进行卷积操作
- 也可以
	1. 先傅里叶变换这幅图，将这幅图变到频域
	2. 将卷积滤波器变到频域上
	3. 将两者相乘，乘完后得到的频域的结果，将其逆傅里叶变换，变到时域上
	   ![[Pasted image 20241207182620.png]]
	   将3\*3的滤波器乘1/9是为了不让图像整体的颜色发生变化
	   如果不乘1/9，那么每个像素就会是原来这个像素周围九个像素的和，图像就会越滤波越明亮了

# 从采样理解走样
![[Pasted image 20241207183545.png]]
左边一列是时域，右边一列是频域

对a图像进行c的采样，得到e
对应的操作在频域中就是bdf

时域的采样在频域中就就体现为频域信号的复制

> 而所谓的左边时域进行乘积=右边频域的卷积
	这句话描述的是傅里叶变换的乘法性质，即在时域中两个信号的逐点乘积，其傅里叶变换等于这两个信号各自傅里叶变换的卷积。换句话说，如果在时域中两个函数相乘，那么在频域中这两个函数的傅里叶变换将会进行卷积操作。这是信号处理中的一个重要性质，常用于简化计算和理论分析。
## 为什么会产生走样呢？
![[Pasted image 20241207183757.png]]
采样不同的间隔，会引起频谱不同间隔进行复制，所相交的部分就是走样

# 抗锯齿
## 反走样
先对图像做模糊（把高频信息拿掉），再采样
![[Pasted image 20241207183855.png]]
对覆盖面积求平均，也就是卷积
## MSAA
MSAA（Multisample Anti-Aliasing）多重采样抗锯齿
通过更多的样本来近似三角形的覆盖率，并不是提高采样频率
把一个像素划分为几个小点，判断这些小点是否在三角形内，再把结果平均起来，就知道三角形覆盖了这个像素的百分之多少
![[Pasted image 20241207184143.png]]
![[Pasted image 20241207184319.png]]
并不是简单的提高了采样的频率，只是用来做第一步模糊，求三角形的覆盖率，平均之后是什么

MSAA解决的其实是对信号的模糊操作
___
# [[Lecture 7|Next]]